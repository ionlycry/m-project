{"ast":null,"code":"import { getUserProfile } from '@/api/user';\nimport UpdateName from '@/views/User/components/UpdateName';\nimport UpdateGender from '@/views/User/components/UpdateGender';\nimport UpdateBirthday from '@/views/User/components/UpdateBirthday';\nimport UpdateImg from '@/views/User/components/UpdateImg';\nexport default {\n  components: {\n    UpdateName,\n    UpdateGender,\n    UpdateBirthday,\n    UpdateImg\n  },\n  data() {\n    return {\n      user: {},\n      isShowName: false,\n      isShowGender: false,\n      isShowBirthday: false,\n      isShowImg: false\n    };\n  },\n  methods: {\n    async loadUserPro() {\n      try {\n        const {\n          data\n        } = await getUserProfile();\n        console.log(data);\n        this.user = data.data;\n      } catch (error) {\n        console.log(error);\n        const {\n          response\n        } = error;\n        const {\n          data: {\n            message\n          }\n        } = response;\n        this.$toast(`获取用户数据失败,${message}`);\n      }\n    },\n    // 选择头像文件\n    onSelectImg() {\n      const file = this.$refs['portraitImg'].file.file[0];\n      console.log(file);\n      // const img=file.createURL()\n    }\n  },\n\n  created() {\n    this.loadUserPro();\n  }\n};","map":{"version":3,"mappings":"AAgFA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;QACA;UAAAN;QAAA;QACAO;QACA;MACA;QACAA;QACA;UAAAC;QAAA;QACA;UACAR;YAAAS;UAAA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACAH;MACA;IACA;EACA;;EACAI;IACA;EACA;AACA","names":["components","UpdateName","UpdateGender","UpdateBirthday","UpdateImg","data","user","isShowName","isShowGender","isShowBirthday","isShowImg","methods","console","response","message","onSelectImg","created"],"sourceRoot":"src/views/User","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"us-profile-wrap\">\r\n    <!-- 导航 -->\r\n    <van-nav-bar title=\"个人信息\" left-arrow @click-left=\"$router.back()\" />\r\n    <!-- 用户信息 -->\r\n    <div>\r\n      <input type=\"file\" ref=\"portraitImg\" @click=\"onSelectImg\" />\r\n      <van-cell title=\"头像\" is-link center>\r\n        <van-image\r\n          :src=\"user.photo\"\r\n          round\r\n          fit=\"cover\"\r\n          @click=\"$refs['portraitImg'].click()\" />\r\n      </van-cell>\r\n      <van-cell\r\n        title=\"昵称\"\r\n        is-link\r\n        :value=\"user.name\"\r\n        @click=\"isShowName = true\" />\r\n      <van-cell\r\n        title=\"性别\"\r\n        is-link\r\n        :value=\"user.gender === 0 ? '男' : '女'\"\r\n        @click=\"isShowGender = true\" />\r\n      <van-cell\r\n        title=\"生日\"\r\n        is-link\r\n        :value=\"user.birthday\"\r\n        @click=\"isShowBirthday = true\" />\r\n    </div>\r\n    <!-- 编辑姓名信息的弹出层 -->\r\n    <van-popup\r\n      v-model=\"isShowName\"\r\n      position=\"bottom\"\r\n      :style=\"{ height: '100%' }\">\r\n      <UpdateName\r\n        :userName=\"user.name\"\r\n        @close=\"isShowName = false\"\r\n        @updateName=\"user.name = $event\"\r\n        v-if=\"isShowName\" />\r\n    </van-popup>\r\n\r\n    <!-- 编辑性别的弹出层 -->\r\n    <van-popup\r\n      v-model=\"isShowGender\"\r\n      position=\"bottom\"\r\n      :style=\"{ height: '45%' }\">\r\n      <UpdateGender\r\n        :userGender=\"user.gender\"\r\n        @close=\"isShowGender = false\"\r\n        @updateGender=\"user.gender = +$event\"\r\n        v-if=\"isShowGender\" />\r\n    </van-popup>\r\n\r\n    <!-- 编辑生日的弹出层 -->\r\n    <van-popup\r\n      v-model=\"isShowBirthday\"\r\n      position=\"bottom\"\r\n      :style=\"{ height: '45%' }\">\r\n      <UpdateBirthday\r\n        :userBirthday=\"user.birthday\"\r\n        @close=\"isShowBirthday = false\"\r\n        @updateBirthday=\"user.birthday = $event\"\r\n        v-if=\"isShowBirthday\" />\r\n    </van-popup>\r\n\r\n    <!-- 编辑头像弹出层 -->\r\n    <van-popup\r\n      v-model=\"isShowImg\"\r\n      position=\"bottom\"\r\n      :style=\"{ height: '100%' }\">\r\n      <UpdateImg\r\n        :userImg=\"user.photo\"\r\n        @close=\"isShowImg = false\"\r\n        v-if=\"isShowImg\" />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getUserProfile } from '@/api/user'\r\nimport UpdateName from '@/views/User/components/UpdateName'\r\nimport UpdateGender from '@/views/User/components/UpdateGender'\r\nimport UpdateBirthday from '@/views/User/components/UpdateBirthday'\r\nimport UpdateImg from '@/views/User/components/UpdateImg'\r\n\r\nexport default {\r\n  components: {\r\n    UpdateName,\r\n    UpdateGender,\r\n    UpdateBirthday,\r\n    UpdateImg,\r\n  },\r\n  data() {\r\n    return {\r\n      user: {},\r\n      isShowName: false,\r\n      isShowGender: false,\r\n      isShowBirthday: false,\r\n      isShowImg: false,\r\n    }\r\n  },\r\n  methods: {\r\n    async loadUserPro() {\r\n      try {\r\n        const { data } = await getUserProfile()\r\n        console.log(data)\r\n        this.user = data.data\r\n      } catch (error) {\r\n        console.log(error)\r\n        const { response } = error\r\n        const {\r\n          data: { message },\r\n        } = response\r\n        this.$toast(`获取用户数据失败,${message}`)\r\n      }\r\n    },\r\n    // 选择头像文件\r\n    onSelectImg() {\r\n      const file = this.$refs['portraitImg'].file.file[0]\r\n      console.log(file)\r\n      // const img=file.createURL()\r\n    },\r\n  },\r\n  created() {\r\n    this.loadUserPro()\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.us-profile-wrap {\r\n  // 导航栏\r\n  ::v-deep .van-nav-bar__content {\r\n    background-color: #3296fa;\r\n    .van-nav-bar__title {\r\n      color: #fff;\r\n    }\r\n    .van-icon-arrow-left {\r\n      color: #fff;\r\n    }\r\n  }\r\n  //   头像图片\r\n  ::v-deep .van-image {\r\n    height: 80px;\r\n    width: 80px;\r\n  }\r\n  // van-cell标题\r\n  .van-cell__title {\r\n    font-size: 30px;\r\n  }\r\n\r\n  .van-popup {\r\n    background-color: #f5f6f7;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}