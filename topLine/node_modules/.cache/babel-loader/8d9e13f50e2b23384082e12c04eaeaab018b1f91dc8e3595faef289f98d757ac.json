{"ast":null,"code":"import { delLike, goToLike } from '@/api/artical';\nexport default {\n  props: {\n    articalId: {\n      type: [Number, String, Object],\n      required: true\n    },\n    attitude: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      followLoading: false //按钮loading状态，默认关闭\n    };\n  },\n\n  model: {\n    prop: 'attitude',\n    event: 'changeFollowed'\n  },\n  methods: {\n    async onActiveFn() {\n      // 开启按钮loading状态\n      this.followLoading = true;\n      try {\n        if (this.attitude === -1) {\n          // 不是点赞状态，点击进行点赞\n          const data = await goToLike(this.articalId);\n          // 更新点赞状态\n          this.$toast('点赞成功');\n          console.log('点赞成功', data);\n        } else {\n          // 点赞状态，点击取消点赞\n          const data = await delLike(this.articalId);\n          this.$toast('取消点赞');\n          console.log('取消点赞成功', data);\n        }\n        this.$emit('changeFollowed', this.attitude === 1 ? -1 : 1);\n      } catch (error) {\n        // // 错误信息内容\n        // const errorArr = [\n        //   {\n        //     errId: 401,\n        //     msg: '用户未认证，请先登录！',\n        //   },\n        //   {\n        //     errId: 400,\n        //     msg: '请求参数错误！',\n        //   },\n        //   {\n        //     errId: 507,\n        //     msg: '数据库错误，请求超时！',\n        //   },\n        // ]\n        // // 显示错误提示\n        // errorArr.forEach((item) => {\n        //   if (item.errId === error.response.status) {\n        //     this.$toast(item.msg)\n        //   }\n        // })\n        console.log(error);\n      }\n      this.followLoading = false;\n    }\n  }\n};","map":{"version":3,"mappings":"AAWA;AACA;EACAA;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE;IACA;MACAC;IACA;EACA;;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACA;MACA;MACA;QACA;UACA;UACA;UACA;UACA;UACAC;QACA;UACA;UACA;UACA;UACAA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAA;MACA;MACA;IACA;EACA;AACA","names":["props","articalId","type","required","attitude","data","followLoading","model","prop","event","methods","console"],"sourceRoot":"src/components/LikeBtn","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-icon\r\n      :name=\"attitude === 1 ? 'good-job' : 'good-job-o'\"\r\n      :loading=\"followLoading\"\r\n      :color=\"attitude === 1 ? 'rgb(255, 176, 29)' : 'rgb(107, 107, 107)'\"\r\n      @click=\"onActiveFn\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { delLike, goToLike } from '@/api/artical'\r\nexport default {\r\n  props: {\r\n    articalId: {\r\n      type: [Number, String, Object],\r\n      required: true,\r\n    },\r\n    attitude: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      followLoading: false, //按钮loading状态，默认关闭\r\n    }\r\n  },\r\n  model: {\r\n    prop: 'attitude',\r\n    event: 'changeFollowed',\r\n  },\r\n  methods: {\r\n    async onActiveFn() {\r\n      // 开启按钮loading状态\r\n      this.followLoading = true\r\n      try {\r\n        if (this.attitude === -1) {\r\n          // 不是点赞状态，点击进行点赞\r\n          const data = await goToLike(this.articalId)\r\n          // 更新点赞状态\r\n          this.$toast('点赞成功')\r\n          console.log('点赞成功', data)\r\n        } else {\r\n          // 点赞状态，点击取消点赞\r\n          const data = await delLike(this.articalId)\r\n          this.$toast('取消点赞')\r\n          console.log('取消点赞成功', data)\r\n        }\r\n        this.$emit('changeFollowed', this.attitude === 1 ? -1 : 1)\r\n      } catch (error) {\r\n        // // 错误信息内容\r\n        // const errorArr = [\r\n        //   {\r\n        //     errId: 401,\r\n        //     msg: '用户未认证，请先登录！',\r\n        //   },\r\n        //   {\r\n        //     errId: 400,\r\n        //     msg: '请求参数错误！',\r\n        //   },\r\n        //   {\r\n        //     errId: 507,\r\n        //     msg: '数据库错误，请求超时！',\r\n        //   },\r\n        // ]\r\n        // // 显示错误提示\r\n        // errorArr.forEach((item) => {\r\n        //   if (item.errId === error.response.status) {\r\n        //     this.$toast(item.msg)\r\n        //   }\r\n        // })\r\n        console.log(error)\r\n      }\r\n      this.followLoading = false\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}