{"ast":null,"code":"import { goToCommentLike, delCommentLike } from '@/api/comment';\nexport default {\n  props: {\n    commentId: {\n      type: [Number, String, Object],\n      required: true\n    },\n    isFollowed: {\n      type: Boolean,\n      required: true\n    },\n    likeCount: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      followLoading: false //按钮loading状态，默认关闭\n    };\n  },\n\n  model: {\n    prop: 'isFollowed',\n    event: 'changeStatus'\n  },\n  methods: {\n    async onLike() {\n      // 开启按钮loading状态\n      this.followLoading = true;\n      try {\n        if (!this.isFollowed) {\n          // 如果没有点赞\n          const {\n            data\n          } = await goToCommentLike(this.commentId);\n          console.log('comLike', data);\n          this.$toast('点赞成功');\n          this.$emit('clickLikeCount', true);\n        } else {\n          const {\n            data\n          } = await delCommentLike(this.commentId);\n          this.$toast('取消点赞');\n          this.$emit('clickLikeCount', false);\n        }\n        this.$emit('changeStatus', !this.isFollowed);\n      } catch (error) {\n        console.log(error);\n      }\n      this.followLoading = false;\n    }\n  }\n};","map":{"version":3,"mappings":"AAcA;AACA;EACAA;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;EACA;EACAG;IACA;MACAC;IACA;EACA;;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACA;MACA;MACA;QACA;UACA;UACA;YAAAL;UAAA;UACAM;UACA;UACA;QACA;UACA;YAAAN;UAAA;UACA;UACA;QACA;QACA;MACA;QACAM;MACA;MAEA;IACA;EACA;AACA","names":["props","commentId","type","required","isFollowed","likeCount","data","followLoading","model","prop","event","methods","console"],"sourceRoot":"src/views/Comment","sources":["CommentLike.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-button\r\n      :icon=\"isFollowed ? 'good-job' : 'good-job-o'\"\r\n      size=\"mini\"\r\n      class=\"good-job-btn\"\r\n      :loading=\"followLoading\"\r\n      @click=\"onLike\"\r\n      ><span class=\"zhan-font\">{{ likeCount || '赞' }}</span></van-button\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { goToCommentLike, delCommentLike } from '@/api/comment'\r\nexport default {\r\n  props: {\r\n    commentId: {\r\n      type: [Number, String, Object],\r\n      required: true,\r\n    },\r\n    isFollowed: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    likeCount: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      followLoading: false, //按钮loading状态，默认关闭\r\n    }\r\n  },\r\n  model: {\r\n    prop: 'isFollowed',\r\n    event: 'changeStatus',\r\n  },\r\n  methods: {\r\n    async onLike() {\r\n      // 开启按钮loading状态\r\n      this.followLoading = true\r\n      try {\r\n        if (!this.isFollowed) {\r\n          // 如果没有点赞\r\n          const { data } = await goToCommentLike(this.commentId)\r\n          console.log('comLike', data)\r\n          this.$toast('点赞成功')\r\n          this.$emit('clickLikeCount', true)\r\n        } else {\r\n          const { data } = await delCommentLike(this.commentId)\r\n          this.$toast('取消点赞')\r\n          this.$emit('clickLikeCount', false)\r\n        }\r\n        this.$emit('changeStatus', !this.isFollowed)\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n\r\n      this.followLoading = false\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.good-job-btn {\r\n  font-size: 28px;\r\n  border: 0px;\r\n  .zhan-font {\r\n    font-size: 18px;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}