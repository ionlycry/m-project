{"ast":null,"code":"import { goToFollow, delFollow } from '@/api/artical';\nexport default {\n  props: {\n    isFollowed: {\n      type: Boolean,\n      required: true\n    },\n    userId: {\n      type: [Number, String, Object],\n      required: true\n    }\n  },\n  data() {\n    return {\n      followLoading: false //按钮loading状态，默认关闭\n    };\n  },\n\n  model: {\n    prop: 'isFollowed',\n    event: 'changeFollowed'\n  },\n  methods: {\n    async followFn() {\n      // 开启按钮loading状态\n      this.followLoading = true;\n      try {\n        if (!this.isFollowed) {\n          console.log(1);\n          // 不是关注状态，点击进行关注\n          const data = await goToFollow(this.userId);\n          // 更新关注状态\n\n          this.$toast('关注成功');\n          console.log('关注成功', data);\n        } else {\n          console.log(2);\n          // 关注状态，点击取消关注\n          const data = await delFollow(this.userId);\n          this.$toast('取消关注');\n          console.log('取消关注成功', data);\n        }\n        this.$emit('changeFollowed', !this.isFollowed);\n      } catch (error) {\n        // 错误信息内容\n        const errorArr = [{\n          errId: 401,\n          msg: '用户未认证，请先登录！'\n        }, {\n          errId: 400,\n          msg: '请求参数错误！'\n        }, {\n          errId: 507,\n          msg: '数据库错误，请求超时！'\n        }];\n        // 显示错误提示\n        errorArr.forEach(item => {\n          if (item.errId === error.response.status) {\n            this.$toast(item.msg);\n          }\n        });\n        console.log(error);\n      }\n      this.followLoading = false;\n    }\n  }\n};","map":{"version":3,"mappings":"AAeA;AACA;EACAA;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;EACA;EACAE;IACA;MACAC;IACA;EACA;;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACA;MACA;MACA;QACA;UACAC;UACA;UACA;UACA;;UAEA;UACAA;QACA;UACAA;UACA;UACA;UACA;UACAA;QACA;QACA;MACA;QACA;QACA,kBACA;UACAC;UACAC;QACA,GACA;UACAD;UACAC;QACA,GACA;UACAD;UACAC;QACA,EACA;QACA;QACAC;UACA;YACA;UACA;QACA;QACAH;MACA;MACA;IACA;EACA;AACA","names":["props","isFollowed","type","required","userId","data","followLoading","model","prop","event","methods","console","errId","msg","errorArr"],"sourceRoot":"src/components/FollowBtn","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-button\r\n      round\r\n      class=\"follow-btn\"\r\n      :class=\"{ followed: !isFollowed }\"\r\n      :loading=\"followLoading\"\r\n      loading-size=\"15\"\r\n      @click=\"followFn\">\r\n      {{ isFollowed ? '取消关注' : '关注' }}\r\n    </van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { goToFollow, delFollow } from '@/api/artical'\r\nexport default {\r\n  props: {\r\n    isFollowed: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    userId: {\r\n      type: [Number, String, Object],\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      followLoading: false, //按钮loading状态，默认关闭\r\n    }\r\n  },\r\n  model: {\r\n    prop: 'isFollowed',\r\n    event: 'changeFollowed',\r\n  },\r\n  methods: {\r\n    async followFn() {\r\n      // 开启按钮loading状态\r\n      this.followLoading = true\r\n      try {\r\n        if (!this.isFollowed) {\r\n          console.log(1)\r\n          // 不是关注状态，点击进行关注\r\n          const data = await goToFollow(this.userId)\r\n          // 更新关注状态\r\n\r\n          this.$toast('关注成功')\r\n          console.log('关注成功', data)\r\n        } else {\r\n          console.log(2)\r\n          // 关注状态，点击取消关注\r\n          const data = await delFollow(this.userId)\r\n          this.$toast('取消关注')\r\n          console.log('取消关注成功', data)\r\n        }\r\n        this.$emit('changeFollowed', !this.isFollowed)\r\n      } catch (error) {\r\n        // 错误信息内容\r\n        const errorArr = [\r\n          {\r\n            errId: 401,\r\n            msg: '用户未认证，请先登录！',\r\n          },\r\n          {\r\n            errId: 400,\r\n            msg: '请求参数错误！',\r\n          },\r\n          {\r\n            errId: 507,\r\n            msg: '数据库错误，请求超时！',\r\n          },\r\n        ]\r\n        // 显示错误提示\r\n        errorArr.forEach((item) => {\r\n          if (item.errId === error.response.status) {\r\n            this.$toast(item.msg)\r\n          }\r\n        })\r\n        console.log(error)\r\n      }\r\n      this.followLoading = false\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}